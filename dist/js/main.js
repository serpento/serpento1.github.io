angular.module("sumModule",["ui.router"]).controller("sumCtrl",["$scope","$stateParams","$location","$http","$state",function(t,e,n,r,u){t.list={summand1:parseInt(e.summand1)||"",summand2:parseInt(e.summand2)||""},t.setUrl=function(){t.list.summand1&&t.list.summand2&&u.go("sum_items",{summand1:t.list.summand1,summand2:t.list.summand2})},r.get("http://api.fixer.io/latest").then(function(e){t.currencyRates=e.data.rates},function(t){console.log("Oops!")}),t.currencyCodes=function(){return t.currencyRates?Object.keys(t.currencyRates):void 0},t.currencyCode="CAD"}]).directive("laSum",function(){return{restrict:"E",scope:{list:"=",currencyRates:"=",code:"="},template:'<input type="text" readonly="true" value="{{ summarize() }}" /><span>{{ getSumInCurrency(code) }}</span>',link:function(t){function e(){return _.reduce(t.list,function(t,e){return t+e},0)}function n(t){return"sum is: "+t}function r(t){console.log(t)}var u=_.compose(r,n);t.summarize=function(){return u(e()),e()},t.getSumInCurrency=function(n){return t.currencyRates?e()/t.currencyRates[n]:void 0}}}}).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("sum",{url:"/",templateUrl:"partials/sum.html",controller:"sumCtrl"}).state("sum_items",{url:"/:summand1/:summand2",templateUrl:"partials/sum.html",controller:"sumCtrl"}),e.otherwise("/")}]);